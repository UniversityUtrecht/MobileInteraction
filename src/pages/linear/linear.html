<!--
  Generated template for the LinearPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Linear</ion-title>
    <ion-buttons end>
      <button ion-button (click)="finish()">Done</button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-scroll #scoreScroller id="scoreScroller" scrollX="true" style = "width: 100%; height: 150px;">
    <div id="drawScore"></div>
  </ion-scroll>
  <div align="center">
    <div class="progress-bar-wrapper">
      <div [innerHtml]="currentNoteDuration" style="top: 50%; bottom: auto; left: 50%;"></div>
      <round-progress [current]="currentDuration" [max]="maxDuration" [semicircle]="false" [radius]="30"></round-progress>
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-scroll #pianoScroller id="pianoScroller" scrollX="true" style = "width: 100%; height: 30vh">
    <div id="piano-container">
      <svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" viewBox="0 0 980 80" id="piano">
        <g *ngFor="let octave of [1,2,3,4,5,6,7]; let i = index">
          <svg width="20" height="80" id="c + {{ octave }}" [attr.x]="0+140*i" y="0">
            <rect class="white c" data-note="c0" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'c' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">C</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="d + {{ octave }}" [attr.x]="20+140*i" y="0">
            <rect class="white d" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'd' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">D</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="e + {{ octave }}" [attr.x]="40+140*i" y="0">
            <rect class="white e" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'e' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">E</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="f + {{ octave }}" [attr.x]="60+140*i" y="0">
            <rect class="white f" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'f' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">F</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="g + {{ octave }}" [attr.x]="80+140*i" y="0">
            <rect class="white f" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'g' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">G</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="a + {{ octave }}" [attr.x]="100+140*i" y="0">
            <rect class="white a" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'a' + octave)" (touchend)="stopNotePlay($event)"></rect>
            <text x="13%" y="90%">A</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <svg width="20" height="80" id="b + {{ octave }}" [attr.x]="120+140*i" y="0">
            <rect class="white b" width="20" height="80" x="0" y="0" (touchstart)="startNotePlay($event, 'b' + octave)" (touchend)="stopNotePlay($event);"></rect>
            <text x="13%" y="90%">B</text>
            <text x="57%" y="90%" class="octaveNum">{{ octave }}</text>
          </svg>

          <rect class="black cs" width="16" height="50" [attr.x]="12+140*i" y="0" (touchstart)="startNotePlay($event, 'db' + octave)" (touchend)="stopNotePlay($event)"></rect>
          <rect class="black ds" width="16" height="50" [attr.x]="32+140*i" y="0" (touchstart)="startNotePlay($event, 'eb' + octave)" (touchend)="stopNotePlay($event)"></rect>
          <rect class="black fs" width="16" height="50" [attr.x]="72+140*i" y="0" (touchstart)="startNotePlay($event, 'gb' + octave)" (touchend)="stopNotePlay($event)"></rect>
          <rect class="black gs" width="16" height="50" [attr.x]="92+140*i" y="0" (touchstart)="startNotePlay($event, 'ab' + octave)" (touchend)="stopNotePlay($event)"></rect>
          <rect class="black as" width="16" height="50" [attr.x]="112+140*i" y="0" (touchstart)="startNotePlay($event, 'bb' + octave)" (touchend)="stopNotePlay($event)"></rect>
        </g>
      </svg></div>
  </ion-scroll>
  <ion-toolbar>
    <ion-buttons>
      <button color="dark" outline ion-button (click)="oneOctaveDown()">
        Octave down
      </button>
      <button color="dark" outline ion-button (click)="oneOctaveUp()">
        Octave up
      </button>
    </ion-buttons>
    <ion-buttons end>
      <button color="dark" outline ion-button (click)="undoNote()">
        <svg class="contIcons" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
          <path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54
     0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/></svg>
      </button>
      <button color="dark" outline ion-button large (click)="playSheetMusic()">
        <ion-icon large class="contIcons" id="playAll" name="play"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
